{
  "v": 1,
  "id": "1e5b9321-b136-4d30-8c06-93df37d7606c",
  "rev": 1,
  "name": "my-nginx-content-pack",
  "summary": "my-nginx-content-pack",
  "description": "",
  "vendor": "ryoh kawairyoh@gmail.com",
  "url": "",
  "parameters": [],
  "entities": [
    {
      "v": "1",
      "type": {
        "name": "input",
        "version": "1"
      },
      "id": "89a23e80-64f5-4083-a80a-ffb7d975fe4e",
      "data": {
        "title": {
          "@type": "string",
          "@value": "beat log"
        },
        "configuration": {
          "tls_key_file": {
            "@type": "string",
            "@value": ""
          },
          "port": {
            "@type": "integer",
            "@value": 5044
          },
          "tls_enable": {
            "@type": "boolean",
            "@value": false
          },
          "recv_buffer_size": {
            "@type": "integer",
            "@value": 1048576
          },
          "tcp_keepalive": {
            "@type": "boolean",
            "@value": false
          },
          "tls_client_auth_cert_file": {
            "@type": "string",
            "@value": ""
          },
          "bind_address": {
            "@type": "string",
            "@value": "0.0.0.0"
          },
          "no_beats_prefix": {
            "@type": "boolean",
            "@value": false
          },
          "tls_cert_file": {
            "@type": "string",
            "@value": ""
          },
          "tls_client_auth": {
            "@type": "string",
            "@value": "disabled"
          },
          "number_worker_threads": {
            "@type": "integer",
            "@value": 16
          },
          "tls_key_password": {
            "@type": "string",
            "@value": ""
          }
        },
        "static_fields": {},
        "type": {
          "@type": "string",
          "@value": "org.graylog.plugins.beats.Beats2Input"
        },
        "global": {
          "@type": "boolean",
          "@value": true
        },
        "extractors": [
          {
            "target_field": {
              "@type": "string",
              "@value": "message"
            },
            "condition_value": {
              "@type": "string",
              "@value": "^(.+)$"
            },
            "order": {
              "@type": "integer",
              "@value": 3
            },
            "converters": [],
            "configuration": {},
            "source_field": {
              "@type": "string",
              "@value": "display_message"
            },
            "title": {
              "@type": "string",
              "@value": "Replace request message"
            },
            "type": {
              "@type": "string",
              "@value": "COPY_INPUT"
            },
            "cursor_strategy": {
              "@type": "string",
              "@value": "COPY"
            },
            "condition_type": {
              "@type": "string",
              "@value": "REGEX"
            }
          },
          {
            "target_field": {
              "@type": "string",
              "@value": ""
            },
            "condition_value": {
              "@type": "string",
              "@value": "^\\{"
            },
            "order": {
              "@type": "integer",
              "@value": 0
            },
            "converters": [],
            "configuration": {
              "flatten": {
                "@type": "boolean",
                "@value": true
              },
              "list_separator": {
                "@type": "string",
                "@value": ", "
              },
              "kv_separator": {
                "@type": "string",
                "@value": "="
              },
              "key_prefix": {
                "@type": "string",
                "@value": ""
              },
              "key_separator": {
                "@type": "string",
                "@value": "_"
              },
              "replace_key_whitespace": {
                "@type": "boolean",
                "@value": false
              },
              "key_whitespace_replacement": {
                "@type": "string",
                "@value": "_"
              }
            },
            "source_field": {
              "@type": "string",
              "@value": "message"
            },
            "title": {
              "@type": "string",
              "@value": "Extract log"
            },
            "type": {
              "@type": "string",
              "@value": "JSON"
            },
            "cursor_strategy": {
              "@type": "string",
              "@value": "COPY"
            },
            "condition_type": {
              "@type": "string",
              "@value": "REGEX"
            }
          },
          {
            "target_field": {
              "@type": "string",
              "@value": "source"
            },
            "condition_value": {
              "@type": "string",
              "@value": "^(.*)\\.(access|error)\\.log.*$"
            },
            "order": {
              "@type": "integer",
              "@value": 2
            },
            "converters": [],
            "configuration": {
              "replacement": {
                "@type": "string",
                "@value": "$1"
              },
              "regex": {
                "@type": "string",
                "@value": "^(.*)\\.(access|error)\\.log.*$"
              }
            },
            "source_field": {
              "@type": "string",
              "@value": "original_source"
            },
            "title": {
              "@type": "string",
              "@value": "Replace original source"
            },
            "type": {
              "@type": "string",
              "@value": "REGEX_REPLACE"
            },
            "cursor_strategy": {
              "@type": "string",
              "@value": "COPY"
            },
            "condition_type": {
              "@type": "string",
              "@value": "REGEX"
            }
          },
          {
            "target_field": {
              "@type": "string",
              "@value": "timestamp"
            },
            "condition_value": {
              "@type": "string",
              "@value": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}[-+]\\d{4}$"
            },
            "order": {
              "@type": "integer",
              "@value": 1
            },
            "converters": [
              {
                "type": {
                  "@type": "string",
                  "@value": "DATE"
                },
                "configuration": {
                  "date_format": {
                    "@type": "string",
                    "@value": "yyyy-MM-dd'T'HH:mm:ssZ"
                  },
                  "time_zone": {
                    "@type": "string",
                    "@value": "Japan"
                  }
                }
              }
            ],
            "configuration": {},
            "source_field": {
              "@type": "string",
              "@value": "@timestamp"
            },
            "title": {
              "@type": "string",
              "@value": "Replace store timestamp"
            },
            "type": {
              "@type": "string",
              "@value": "COPY_INPUT"
            },
            "cursor_strategy": {
              "@type": "string",
              "@value": "COPY"
            },
            "condition_type": {
              "@type": "string",
              "@value": "REGEX"
            }
          },
          {
            "target_field": {
              "@type": "string",
              "@value": "message"
            },
            "condition_value": {
              "@type": "string",
              "@value": "^(.+)$"
            },
            "order": {
              "@type": "integer",
              "@value": 4
            },
            "converters": [],
            "configuration": {},
            "source_field": {
              "@type": "string",
              "@value": "errormessage"
            },
            "title": {
              "@type": "string",
              "@value": "Replace error message"
            },
            "type": {
              "@type": "string",
              "@value": "COPY_INPUT"
            },
            "cursor_strategy": {
              "@type": "string",
              "@value": "COPY"
            },
            "condition_type": {
              "@type": "string",
              "@value": "REGEX"
            }
          }
        ]
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "lookup_table",
        "version": "1"
      },
      "id": "56643489-b267-4fc3-8dd1-e43fd003c8ad",
      "data": {
        "default_single_value_type": {
          "@type": "string",
          "@value": "NULL"
        },
        "cache_name": {
          "@type": "string",
          "@value": "5c27159f-670c-413b-9ace-8be127f440dd"
        },
        "name": {
          "@type": "string",
          "@value": "geoip-lookup-table"
        },
        "default_multi_value_type": {
          "@type": "string",
          "@value": "NULL"
        },
        "default_multi_value": {
          "@type": "string",
          "@value": ""
        },
        "data_adapter_name": {
          "@type": "string",
          "@value": "a2e89dd3-3827-4d7e-a355-1cdf401e8165"
        },
        "title": {
          "@type": "string",
          "@value": "GeoIP Lookup Table"
        },
        "default_single_value": {
          "@type": "string",
          "@value": ""
        },
        "description": {
          "@type": "string",
          "@value": ""
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "dashboard",
        "version": "2"
      },
      "id": "a7020627-cf35-4490-932b-272f12ec6d2f",
      "data": {
        "summary": {
          "@type": "string",
          "@value": ""
        },
        "search": {
          "queries": [
            {
              "id": "601f8fc9-4515-4716-a16e-d9660b7aa99d",
              "timerange": {
                "type": "relative",
                "range": 300
              },
              "query": {
                "type": "elasticsearch",
                "query_string": ""
              },
              "search_types": [
                {
                  "query": {
                    "type": "elasticsearch",
                    "query_string": ""
                  },
                  "name": "chart",
                  "timerange": {
                    "type": "relative",
                    "range": 300
                  },
                  "streams": [
                    "9cefcbab-405b-4c62-a795-a4c5ae903c3c"
                  ],
                  "series": [
                    {
                      "type": "count",
                      "id": "Message Count",
                      "field": null
                    }
                  ],
                  "filter": null,
                  "rollup": true,
                  "row_groups": [],
                  "type": "pivot",
                  "id": "ad6ae010-ead4-4c63-b7cb-80fb97f49b9d",
                  "column_groups": [],
                  "sort": []
                },
                {
                  "query": {
                    "type": "elasticsearch",
                    "query_string": ""
                  },
                  "name": "chart",
                  "timerange": {
                    "type": "relative",
                    "range": 300
                  },
                  "streams": [
                    "e532c541-1a01-4b9f-bcbe-2b11549677ea"
                  ],
                  "series": [
                    {
                      "type": "count",
                      "id": "Message Count",
                      "field": null
                    }
                  ],
                  "filter": null,
                  "rollup": true,
                  "row_groups": [],
                  "type": "pivot",
                  "id": "e14de2cc-5689-4470-bbcc-b492db7063fa",
                  "column_groups": [],
                  "sort": []
                },
                {
                  "query": null,
                  "name": "chart",
                  "timerange": {
                    "type": "relative",
                    "range": 300
                  },
                  "streams": [],
                  "series": [
                    {
                      "type": "count",
                      "id": "count()",
                      "field": null
                    }
                  ],
                  "filter": null,
                  "rollup": true,
                  "row_groups": [
                    {
                      "type": "time",
                      "field": "timestamp",
                      "interval": {
                        "type": "auto",
                        "scaling": 1
                      }
                    }
                  ],
                  "type": "pivot",
                  "id": "02c08f71-94ad-4e35-8c26-9e47da826902",
                  "column_groups": [],
                  "sort": []
                },
                {
                  "query": {
                    "type": "elasticsearch",
                    "query_string": ""
                  },
                  "name": "chart",
                  "timerange": {
                    "type": "relative",
                    "range": 300
                  },
                  "streams": [
                    "e19871ac-070e-415d-b172-8ea4c87d1326"
                  ],
                  "series": [
                    {
                      "type": "count",
                      "id": "count()",
                      "field": null
                    }
                  ],
                  "filter": null,
                  "rollup": true,
                  "row_groups": [
                    {
                      "type": "values",
                      "field": "ua_browser_family",
                      "limit": 15
                    }
                  ],
                  "type": "pivot",
                  "id": "759133b5-38ed-4f0d-910f-e50204df1185",
                  "column_groups": [],
                  "sort": []
                },
                {
                  "query": {
                    "type": "elasticsearch",
                    "query_string": ""
                  },
                  "name": "chart",
                  "timerange": {
                    "type": "relative",
                    "range": 300
                  },
                  "streams": [
                    "d2e15d83-4eb8-4ff8-8093-1ae0a31d5eb0"
                  ],
                  "series": [
                    {
                      "type": "count",
                      "id": "Message Count",
                      "field": null
                    }
                  ],
                  "filter": null,
                  "rollup": true,
                  "row_groups": [],
                  "type": "pivot",
                  "id": "72963b40-c994-4c3c-b2fc-39a03705f37c",
                  "column_groups": [],
                  "sort": []
                },
                {
                  "query": {
                    "type": "elasticsearch",
                    "query_string": ""
                  },
                  "name": null,
                  "timerange": {
                    "type": "relative",
                    "range": 300
                  },
                  "offset": 0,
                  "streams": [
                    "e19871ac-070e-415d-b172-8ea4c87d1326"
                  ],
                  "filter": null,
                  "decorators": [],
                  "type": "messages",
                  "id": "26acdce4-097a-4044-ae3c-b8d9b5f9b905",
                  "limit": 150
                },
                {
                  "query": {
                    "type": "elasticsearch",
                    "query_string": ""
                  },
                  "name": null,
                  "timerange": {
                    "type": "relative",
                    "range": 300
                  },
                  "offset": 0,
                  "streams": [
                    "859f7eaa-eeaf-4247-9b56-8f607708a7cd"
                  ],
                  "filter": null,
                  "decorators": [],
                  "type": "messages",
                  "id": "d82f215d-1545-49e1-8657-735ac7d49067",
                  "limit": 150
                }
              ]
            }
          ],
          "parameters": [],
          "requires": {},
          "owner": "admin",
          "created_at": "2020-05-30T16:45:27.055Z"
        },
        "created_at": "2020-05-30T16:35:38.703Z",
        "requires": {},
        "state": {
          "601f8fc9-4515-4716-a16e-d9660b7aa99d": {
            "selected_fields": null,
            "static_message_list_id": null,
            "titles": {
              "widget": {
                "8af4dbcb-8f4d-4387-ba9c-5cbb4be29cf0": "nginx access log",
                "7cf78c9e-6efa-4b33-be82-92d7a96a2eb4": "2xx count",
                "69c1aa60-0116-46a3-bbbb-29995aa2cae5": "4xx count",
                "db0af4c9-bf98-406f-af3d-4800abf307ce": "5xx count",
                "5b06f392-599e-4512-859a-b27edc6aa63d": "Browser",
                "5258ee55-c71d-4913-b384-785d4a6bc79c": "Message Count",
                "6934902a-725a-4d90-a3cb-054ac56adc76": "nginx error log"
              }
            },
            "widgets": [
              {
                "id": "7cf78c9e-6efa-4b33-be82-92d7a96a2eb4",
                "type": "aggregation",
                "filter": null,
                "timerange": {
                  "type": "relative",
                  "range": 300
                },
                "query": {
                  "type": "elasticsearch",
                  "query_string": ""
                },
                "streams": [
                  "d2e15d83-4eb8-4ff8-8093-1ae0a31d5eb0"
                ],
                "config": {
                  "visualization": "numeric",
                  "event_annotation": false,
                  "row_pivots": [],
                  "series": [
                    {
                      "config": {
                        "name": "Message Count"
                      },
                      "function": "count()"
                    }
                  ],
                  "rollup": true,
                  "column_pivots": [],
                  "visualization_config": {
                    "trend": false,
                    "trend_preference": "NEUTRAL"
                  },
                  "formatting_settings": null,
                  "sort": []
                }
              },
              {
                "id": "6934902a-725a-4d90-a3cb-054ac56adc76",
                "type": "messages",
                "filter": null,
                "timerange": {
                  "type": "relative",
                  "range": 300
                },
                "query": {
                  "type": "elasticsearch",
                  "query_string": ""
                },
                "streams": [
                  "859f7eaa-eeaf-4247-9b56-8f607708a7cd"
                ],
                "config": {
                  "fields": [
                    "timestamp",
                    "source"
                  ],
                  "show_message_row": true,
                  "decorators": [],
                  "sort": [
                    {
                      "type": "pivot",
                      "field": "timestamp",
                      "direction": "Descending"
                    }
                  ]
                }
              },
              {
                "id": "69c1aa60-0116-46a3-bbbb-29995aa2cae5",
                "type": "aggregation",
                "filter": null,
                "timerange": {
                  "type": "relative",
                  "range": 300
                },
                "query": {
                  "type": "elasticsearch",
                  "query_string": ""
                },
                "streams": [
                  "e532c541-1a01-4b9f-bcbe-2b11549677ea"
                ],
                "config": {
                  "visualization": "numeric",
                  "event_annotation": false,
                  "row_pivots": [],
                  "series": [
                    {
                      "config": {
                        "name": "Message Count"
                      },
                      "function": "count()"
                    }
                  ],
                  "rollup": true,
                  "column_pivots": [],
                  "visualization_config": {
                    "trend": false,
                    "trend_preference": "NEUTRAL"
                  },
                  "formatting_settings": null,
                  "sort": []
                }
              },
              {
                "id": "5258ee55-c71d-4913-b384-785d4a6bc79c",
                "type": "aggregation",
                "filter": null,
                "timerange": {
                  "type": "relative",
                  "range": 300
                },
                "query": null,
                "streams": [],
                "config": {
                  "visualization": "bar",
                  "event_annotation": false,
                  "row_pivots": [
                    {
                      "field": "timestamp",
                      "type": "time",
                      "config": {
                        "interval": {
                          "type": "auto",
                          "scaling": null
                        }
                      }
                    }
                  ],
                  "series": [
                    {
                      "config": {
                        "name": null
                      },
                      "function": "count()"
                    }
                  ],
                  "rollup": true,
                  "column_pivots": [],
                  "visualization_config": null,
                  "formatting_settings": null,
                  "sort": []
                }
              },
              {
                "id": "5b06f392-599e-4512-859a-b27edc6aa63d",
                "type": "aggregation",
                "filter": null,
                "timerange": {
                  "type": "relative",
                  "range": 300
                },
                "query": {
                  "type": "elasticsearch",
                  "query_string": ""
                },
                "streams": [
                  "e19871ac-070e-415d-b172-8ea4c87d1326"
                ],
                "config": {
                  "visualization": "pie",
                  "event_annotation": false,
                  "row_pivots": [
                    {
                      "field": "ua_browser_family",
                      "type": "values",
                      "config": {
                        "limit": 15
                      }
                    }
                  ],
                  "series": [
                    {
                      "config": {
                        "name": null
                      },
                      "function": "count()"
                    }
                  ],
                  "rollup": true,
                  "column_pivots": [],
                  "visualization_config": null,
                  "formatting_settings": null,
                  "sort": []
                }
              },
              {
                "id": "db0af4c9-bf98-406f-af3d-4800abf307ce",
                "type": "aggregation",
                "filter": null,
                "timerange": {
                  "type": "relative",
                  "range": 300
                },
                "query": {
                  "type": "elasticsearch",
                  "query_string": ""
                },
                "streams": [
                  "9cefcbab-405b-4c62-a795-a4c5ae903c3c"
                ],
                "config": {
                  "visualization": "numeric",
                  "event_annotation": false,
                  "row_pivots": [],
                  "series": [
                    {
                      "config": {
                        "name": "Message Count"
                      },
                      "function": "count()"
                    }
                  ],
                  "rollup": true,
                  "column_pivots": [],
                  "visualization_config": {
                    "trend": false,
                    "trend_preference": "NEUTRAL"
                  },
                  "formatting_settings": null,
                  "sort": []
                }
              },
              {
                "id": "8af4dbcb-8f4d-4387-ba9c-5cbb4be29cf0",
                "type": "messages",
                "filter": null,
                "timerange": {
                  "type": "relative",
                  "range": 300
                },
                "query": {
                  "type": "elasticsearch",
                  "query_string": ""
                },
                "streams": [
                  "e19871ac-070e-415d-b172-8ea4c87d1326"
                ],
                "config": {
                  "fields": [
                    "timestamp",
                    "source"
                  ],
                  "show_message_row": true,
                  "decorators": [],
                  "sort": [
                    {
                      "type": "pivot",
                      "field": "timestamp",
                      "direction": "Descending"
                    }
                  ]
                }
              }
            ],
            "widget_mapping": {
              "69c1aa60-0116-46a3-bbbb-29995aa2cae5": [
                "e14de2cc-5689-4470-bbcc-b492db7063fa"
              ],
              "5b06f392-599e-4512-859a-b27edc6aa63d": [
                "759133b5-38ed-4f0d-910f-e50204df1185"
              ],
              "7cf78c9e-6efa-4b33-be82-92d7a96a2eb4": [
                "72963b40-c994-4c3c-b2fc-39a03705f37c"
              ],
              "8af4dbcb-8f4d-4387-ba9c-5cbb4be29cf0": [
                "26acdce4-097a-4044-ae3c-b8d9b5f9b905"
              ],
              "db0af4c9-bf98-406f-af3d-4800abf307ce": [
                "ad6ae010-ead4-4c63-b7cb-80fb97f49b9d"
              ],
              "5258ee55-c71d-4913-b384-785d4a6bc79c": [
                "02c08f71-94ad-4e35-8c26-9e47da826902"
              ],
              "6934902a-725a-4d90-a3cb-054ac56adc76": [
                "d82f215d-1545-49e1-8657-735ac7d49067"
              ]
            },
            "positions": {
              "69c1aa60-0116-46a3-bbbb-29995aa2cae5": {
                "col": 4,
                "row": 3,
                "height": 3,
                "width": 3
              },
              "5b06f392-599e-4512-859a-b27edc6aa63d": {
                "col": 10,
                "row": 3,
                "height": 3,
                "width": 3
              },
              "7cf78c9e-6efa-4b33-be82-92d7a96a2eb4": {
                "col": 1,
                "row": 3,
                "height": 3,
                "width": 3
              },
              "8af4dbcb-8f4d-4387-ba9c-5cbb4be29cf0": {
                "col": 1,
                "row": 9,
                "height": 4,
                "width": "Infinity"
              },
              "db0af4c9-bf98-406f-af3d-4800abf307ce": {
                "col": 7,
                "row": 3,
                "height": 3,
                "width": 3
              },
              "5258ee55-c71d-4913-b384-785d4a6bc79c": {
                "col": 1,
                "row": 1,
                "height": 2,
                "width": "Infinity"
              },
              "6934902a-725a-4d90-a3cb-054ac56adc76": {
                "col": 1,
                "row": 6,
                "height": 3,
                "width": "Infinity"
              }
            },
            "formatting": {
              "highlighting": []
            },
            "display_mode_settings": {
              "positions": {}
            }
          }
        },
        "properties": [],
        "owner": "admin",
        "title": {
          "@type": "string",
          "@value": "nginx"
        },
        "type": "DASHBOARD",
        "description": {
          "@type": "string",
          "@value": ""
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "stream",
        "version": "1"
      },
      "id": "859f7eaa-eeaf-4247-9b56-8f607708a7cd",
      "data": {
        "alarm_callbacks": [],
        "outputs": [],
        "remove_matches": {
          "@type": "boolean",
          "@value": true
        },
        "title": {
          "@type": "string",
          "@value": "nginx error"
        },
        "stream_rules": [
          {
            "type": {
              "@type": "string",
              "@value": "EXACT"
            },
            "field": {
              "@type": "string",
              "@value": "tag"
            },
            "value": {
              "@type": "string",
              "@value": "nginx.error"
            },
            "inverted": {
              "@type": "boolean",
              "@value": false
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          },
          {
            "type": {
              "@type": "string",
              "@value": "PRESENCE"
            },
            "field": {
              "@type": "string",
              "@value": "grokfailure"
            },
            "value": {
              "@type": "string",
              "@value": ""
            },
            "inverted": {
              "@type": "boolean",
              "@value": true
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          }
        ],
        "alert_conditions": [],
        "matching_type": {
          "@type": "string",
          "@value": "AND"
        },
        "disabled": {
          "@type": "boolean",
          "@value": false
        },
        "description": {
          "@type": "string",
          "@value": "nginx error log"
        },
        "default_stream": {
          "@type": "boolean",
          "@value": false
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "stream",
        "version": "1"
      },
      "id": "9cefcbab-405b-4c62-a795-a4c5ae903c3c",
      "data": {
        "alarm_callbacks": [],
        "outputs": [],
        "remove_matches": {
          "@type": "boolean",
          "@value": false
        },
        "title": {
          "@type": "string",
          "@value": "nginx 5xx"
        },
        "stream_rules": [
          {
            "type": {
              "@type": "string",
              "@value": "EXACT"
            },
            "field": {
              "@type": "string",
              "@value": "tag"
            },
            "value": {
              "@type": "string",
              "@value": "nginx.access"
            },
            "inverted": {
              "@type": "boolean",
              "@value": false
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          },
          {
            "type": {
              "@type": "string",
              "@value": "REGEX"
            },
            "field": {
              "@type": "string",
              "@value": "response"
            },
            "value": {
              "@type": "string",
              "@value": "5[0-9]{2}"
            },
            "inverted": {
              "@type": "boolean",
              "@value": false
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          }
        ],
        "alert_conditions": [],
        "matching_type": {
          "@type": "string",
          "@value": "AND"
        },
        "disabled": {
          "@type": "boolean",
          "@value": false
        },
        "description": {
          "@type": "string",
          "@value": "nginx 5xx access"
        },
        "default_stream": {
          "@type": "boolean",
          "@value": false
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "stream",
        "version": "1"
      },
      "id": "e532c541-1a01-4b9f-bcbe-2b11549677ea",
      "data": {
        "alarm_callbacks": [],
        "outputs": [],
        "remove_matches": {
          "@type": "boolean",
          "@value": false
        },
        "title": {
          "@type": "string",
          "@value": "nginx 4xx"
        },
        "stream_rules": [
          {
            "type": {
              "@type": "string",
              "@value": "EXACT"
            },
            "field": {
              "@type": "string",
              "@value": "tag"
            },
            "value": {
              "@type": "string",
              "@value": "nginx.access"
            },
            "inverted": {
              "@type": "boolean",
              "@value": false
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          },
          {
            "type": {
              "@type": "string",
              "@value": "REGEX"
            },
            "field": {
              "@type": "string",
              "@value": "response"
            },
            "value": {
              "@type": "string",
              "@value": "4[0-9]{2}"
            },
            "inverted": {
              "@type": "boolean",
              "@value": false
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          }
        ],
        "alert_conditions": [],
        "matching_type": {
          "@type": "string",
          "@value": "AND"
        },
        "disabled": {
          "@type": "boolean",
          "@value": false
        },
        "description": {
          "@type": "string",
          "@value": "nginx 4xx access"
        },
        "default_stream": {
          "@type": "boolean",
          "@value": false
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "pipeline",
        "version": "1"
      },
      "id": "6731b6cd-ef16-4ee2-94e9-37176208e9bf",
      "data": {
        "title": {
          "@type": "string",
          "@value": "nginx geoip lookup"
        },
        "description": {
          "@type": "string",
          "@value": ""
        },
        "source": {
          "@type": "string",
          "@value": "pipeline \"nginx geoip lookup\"\nstage 0 match either\nrule \"lookup geoip\"\nend"
        },
        "connected_streams": [
          {
            "@type": "string",
            "@value": "e19871ac-070e-415d-b172-8ea4c87d1326"
          }
        ]
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "lookup_adapter",
        "version": "1"
      },
      "id": "a2e89dd3-3827-4d7e-a355-1cdf401e8165",
      "data": {
        "name": {
          "@type": "string",
          "@value": "geoip-data-adapter"
        },
        "title": {
          "@type": "string",
          "@value": "GeoIP Data Adapter"
        },
        "description": {
          "@type": "string",
          "@value": ""
        },
        "configuration": {
          "type": {
            "@type": "string",
            "@value": "maxmind_geoip"
          },
          "path": {
            "@type": "string",
            "@value": "/usr/share/GeoIP/GeoLite2-City.mmdb"
          },
          "database_type": {
            "@type": "string",
            "@value": "MAXMIND_CITY"
          },
          "check_interval": {
            "@type": "long",
            "@value": 1
          },
          "check_interval_unit": {
            "@type": "string",
            "@value": "DAYS"
          }
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "stream",
        "version": "1"
      },
      "id": "854cd6ef-0acf-481e-a67d-23490c8b5bfd",
      "data": {
        "alarm_callbacks": [],
        "outputs": [],
        "remove_matches": {
          "@type": "boolean",
          "@value": false
        },
        "title": {
          "@type": "string",
          "@value": "nginx 3xx"
        },
        "stream_rules": [
          {
            "type": {
              "@type": "string",
              "@value": "REGEX"
            },
            "field": {
              "@type": "string",
              "@value": "response"
            },
            "value": {
              "@type": "string",
              "@value": "3[0-9]{2}"
            },
            "inverted": {
              "@type": "boolean",
              "@value": false
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          },
          {
            "type": {
              "@type": "string",
              "@value": "EXACT"
            },
            "field": {
              "@type": "string",
              "@value": "tag"
            },
            "value": {
              "@type": "string",
              "@value": "nginx.access"
            },
            "inverted": {
              "@type": "boolean",
              "@value": false
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          }
        ],
        "alert_conditions": [],
        "matching_type": {
          "@type": "string",
          "@value": "AND"
        },
        "disabled": {
          "@type": "boolean",
          "@value": false
        },
        "description": {
          "@type": "string",
          "@value": "nginx 3xx access"
        },
        "default_stream": {
          "@type": "boolean",
          "@value": false
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "stream",
        "version": "1"
      },
      "id": "e19871ac-070e-415d-b172-8ea4c87d1326",
      "data": {
        "alarm_callbacks": [],
        "outputs": [],
        "remove_matches": {
          "@type": "boolean",
          "@value": true
        },
        "title": {
          "@type": "string",
          "@value": "nginx access"
        },
        "stream_rules": [
          {
            "type": {
              "@type": "string",
              "@value": "EXACT"
            },
            "field": {
              "@type": "string",
              "@value": "tag"
            },
            "value": {
              "@type": "string",
              "@value": "nginx.access"
            },
            "inverted": {
              "@type": "boolean",
              "@value": false
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          }
        ],
        "alert_conditions": [],
        "matching_type": {
          "@type": "string",
          "@value": "AND"
        },
        "disabled": {
          "@type": "boolean",
          "@value": false
        },
        "description": {
          "@type": "string",
          "@value": "nginx stream"
        },
        "default_stream": {
          "@type": "boolean",
          "@value": false
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "pipeline_rule",
        "version": "1"
      },
      "id": "db9eddfc-2005-4be1-be32-f8ee185ad571",
      "data": {
        "title": {
          "@type": "string",
          "@value": "lookup geoip"
        },
        "description": {
          "@type": "string",
          "@value": ""
        },
        "source": {
          "@type": "string",
          "@value": "rule \"lookup geoip\"\nwhen\n  has_field(\"clientip\")\nthen\n  let clientip = $message.clientip;\n  let geo = lookup(\"geoip-lookup-table\", clientip);\n  set_field(\"clientip_geo_location\", geo[\"coordinates\"]);\n  set_field(\"clientip_geo_country\", geo[\"country\"].iso_code);\n  set_field(\"clientip_geo_lcity\", geo[\"city\"].names.en);\nend"
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "lookup_cache",
        "version": "1"
      },
      "id": "5c27159f-670c-413b-9ace-8be127f440dd",
      "data": {
        "name": {
          "@type": "string",
          "@value": "geoip-cache"
        },
        "title": {
          "@type": "string",
          "@value": "GeoIP Cache"
        },
        "description": {
          "@type": "string",
          "@value": ""
        },
        "configuration": {
          "type": {
            "@type": "string",
            "@value": "guava_cache"
          },
          "max_size": {
            "@type": "integer",
            "@value": 10000
          },
          "expire_after_access": {
            "@type": "long",
            "@value": 60
          },
          "expire_after_access_unit": {
            "@type": "string",
            "@value": "DAYS"
          },
          "expire_after_write": {
            "@type": "long",
            "@value": 0
          }
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    },
    {
      "v": "1",
      "type": {
        "name": "stream",
        "version": "1"
      },
      "id": "d2e15d83-4eb8-4ff8-8093-1ae0a31d5eb0",
      "data": {
        "alarm_callbacks": [],
        "outputs": [],
        "remove_matches": {
          "@type": "boolean",
          "@value": false
        },
        "title": {
          "@type": "string",
          "@value": "nginx 2xx"
        },
        "stream_rules": [
          {
            "type": {
              "@type": "string",
              "@value": "EXACT"
            },
            "field": {
              "@type": "string",
              "@value": "tag"
            },
            "value": {
              "@type": "string",
              "@value": "nginx.access"
            },
            "inverted": {
              "@type": "boolean",
              "@value": false
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          },
          {
            "type": {
              "@type": "string",
              "@value": "REGEX"
            },
            "field": {
              "@type": "string",
              "@value": "response"
            },
            "value": {
              "@type": "string",
              "@value": "2[0-9]{2}"
            },
            "inverted": {
              "@type": "boolean",
              "@value": false
            },
            "description": {
              "@type": "string",
              "@value": ""
            }
          }
        ],
        "alert_conditions": [],
        "matching_type": {
          "@type": "string",
          "@value": "AND"
        },
        "disabled": {
          "@type": "boolean",
          "@value": false
        },
        "description": {
          "@type": "string",
          "@value": "nginx 2xx access"
        },
        "default_stream": {
          "@type": "boolean",
          "@value": false
        }
      },
      "constraints": [
        {
          "type": "server-version",
          "version": ">=3.3.0+4ea5649"
        }
      ]
    }
  ]
}